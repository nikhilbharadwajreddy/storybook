/**
 * turn.js 4th release
 * turnjs.com
 * turnjs.com/license.txt
 *
 * Copyright (C) 2012 Emmanuel Garcia
 * All rights reserved
 **/

(function(f){var g=!1,y="",p="Webkit Moz O ms Khtml".split(" "),q="",D=document.createElement("div");for(o=0;o<p.length;o++)if("undefined"!=typeof D.style[p[o]+"Transform"]){q=p[o];break}var u="v"=="\v";f.fn.transform=function(a){var b={};if(q)b[q+"Transform"]=a;else return!1;this.css(b);return this};f.fn.transform3d=function(a){if(!u){var b={};q?b[q+"Transform"]=a:b.transform=a;this.css(b);return this}};var v=0<=navigator.userAgent.toLowerCase().indexOf("safari"),A=0<=navigator.userAgent.indexOf("Chrome"),
B=0<=navigator.userAgent.indexOf("Android"),C=0<=navigator.userAgent.indexOf("MSIE 10.0");f.fn.css3=function(a){var b={};if(q)for(var c in a)b[q+c.substr(0,1).toUpperCase()+c.substr(1)]=a[c];else for(c in a)b[c]=a[c];this.css(b);return this};var r=function(a,b,c){a=a.replace("#","");return"rgb"+(c?"a(":"(")+parseInt(a.substr(0,2),16)+","+parseInt(a.substr(2,2),16)+","+parseInt(a.substr(4,2),16)+(c?","+c:"")+")"};if(!window.requestAnimationFrame){window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();window.cancelAnimationFrame=function(){return window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}()}var s=document.createElement("style");s.type="text/css";s.innerHTML=".turn-deep-shadow{background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0.3)), to(rgba(0, 0, 0, 0)));background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));background-image: linear-gradient(top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));}.turn-transition{-webkit-transition-duration: 0.5s;-moz-transition-duration: 0.5s;-o-transition-duration: 0.5s;-ms-transition-duration: 0.5s; }";
document.getElementsByTagName("head")[0].appendChild(s);function w(a,b,c){return function(){return c.apply(a,b)}}window.Turn=function(a,b){var c=this,z={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null};b=f.extend(z,b);this.data={};this.options=b;this.animating=this.disabled=!1;this.pageWrap=[];this.pages=[];this.pagePlace=[];this.pageObjs={};this.pageZoom=[];this.hasHardCover=!1;this.eventHandlers={};this.origin={pageY:0,pageX:0};this.lastOrigin={pageY:0,
pageX:0};this.corners={};this.pageWidth=0;this.pageHeight=0;this.pageCSSOrigin={top:0,left:0,right:0};var d=a.children(),e=0,h=0,k=!1,n=f(this);1>d.length&&a.addClass("turn-disabled");0==b.acceleration&&(g=!0);var x=function(){var l="";if(b.name){n.data().pageObjs[0].attr("page")==b.name?l="page-"+b.name:n.data().pageObjs[0].attr("sample")==b.name&&(l="sample-"+b.name);if(0<l.length){n.parent().siblings(".p").hide();n.parent().siblings("."+l).show()}}};this.turn=function(l){c.pagePlace=[];c.pageObjs=
{};c.options=f.extend(c.options,l);for(var m=1;m<=c.options.pages;m++)c.pagePlace[m]=m%2==0?"left":"right",c.pageObjs[m]=f("<div />").attr("page",m),null!==c.options.pageData&&c.pageObjs[m].attr("data-class",c.options.pageData[m]),c.pageObjs[m].html('<div class="gradient"></div><div class="loader"></div>');this._view(c.options.page);if(b.when){var t;for(t in b.when)Object.prototype.hasOwnProperty.call(b.when,t)&&"function"==typeof b.when[t]&&this.bind(t,b.when[t])}f(this).bind("start",function(a,b,d){c.options.turning&&
c.options.turning(a,b,d)});f(this).bind("end",function(){c.options.turned&&c.options.turned(f(this).attr("page"))});f(this).bind("pressed",function(a){c.options.pressed&&c.options.pressed(f(this).attr("page"))});f(this).bind("released",function(a){c.options.released&&c.options.released(f(this).attr("page"))});f(this).bind("hover",function(){c.options.hover&&c.options.hover(f(this).attr("page"))});f(this).bind("missing",function(a,b){if(c.options.missing){var d=[];for(a=0;a<b.length;a++)d.push(b[a]);c.options.missing(d)}});
n.parent().bind("tap",function(a){n.transform({rotate:0+"deg"});n.parent().css("overflow","hidden");n.css({margin:""});n.parent().css("overflow","visible")})};var E=function(a){c.hasHardCover=!0;var b=1==a?"hard-cover-1":"hard-cover-2",d=f("<div />").attr("id",b).addClass("hard");d.data().parent=c;c["hard-cover-"+a]=d;c.options&&c.options.pages?1==a?c.pageObjs[1].before(d):c.pageObjs[c.options.pages].after(d):a.before(d)};this.addCover=function(a,b){E(a);c.options&&c.options.pages?(1==a?c.pageObjs[0]=
f("<div />").attr("page",0).css({width:c.pageWidth,height:c.pageHeight}).appendTo(c.pageWrap[0]):c.pageObjs[c.options.pages+1]=f("<div />").attr("page",c.options.pages+1).appendTo(c.pageWrap[c.options.pages+1]),b&&c.hasHardCover&&("start"==b?(c.pageObjs[0].css({position:"absolute",left:0,top:0,zIndex:3,background:"red",transformOrigin:"0% 50%"}).transform({rotateY:0}),c.pageObjs[0].appendTo(c.pageWrap[0])):"end"==b&&(c.pageObjs[c.options.pages+1].css({position:"absolute",right:0,top:0,zIndex:3,transformOrigin:"100% 50%"}).transform({rotateY:0}),
c.pageObjs[c.options.pages+1].appendTo(c.pageWrap[c.options.pages+1])))):a&&b&&c.hasHardCover&&("start"==b?c.pageWrap[0]=f("<div />").css({width:c.pageWidth,height:c.pageHeight}).appendTo(a):"end"==b&&(c.pageWrap[c.options.pages]=f("<div />").css({width:c.pageWidth,height:c.pageHeight}).appendTo(a)))};this.moveBy=function(a,b,d){var e=180*Math.atan2(a,b)/Math.PI;this.transform({rotate:e+"deg",translate:{x:d?0:Math.sqrt(Math.pow(a,2)+Math.pow(b,2)),y:0}})};this.init=function(){c=this;var l=f(this).width();
e=f(this).height();b.pages=d.length;b.pageWidth=l;b.pageHeight=e;a.css({width:l,height:e});a.addClass("turn-pages-container");this.pageWidth=l;this.pageHeight=e;this.turn(b);if(0==b.acceleration)for(var l=0;l<d.length;l++)f(d[l]).addClass("turn-no-ajax");return this};this.disable=function(a){var b=this.data();for(a in b.pageWrap)Object.prototype.hasOwnProperty.call(b.pageWrap,a)&&(b.pageWrap[a].hide(),this.pagePlace[a]=0,b.pageObjs[a]&&b.pageObjs[a].remove());this.disabled=!0;return this};this.destroy=
function(){var a=this.data();for(var b in a.pageWrap)Object.prototype.hasOwnProperty.call(a.pageWrap,b)&&(a.pageWrap[b].remove(),delete a.pageWrap[b],delete a.pageObjs[b]);d.removeClass("turn-page");a.pages=[];return this};this._pos=function(a,b){var d=this.data(),e=this.options;if(0===a||a==e.pages+1)var h="fixed"==b?a==e.pages+1?"r":"l":a?a-1<=d.totalPages/2?a==e.pages+1?"r":"l":a==e.pages+1?"l":"r":0===a?"r":"l";else h=a-1<=d.totalPages/2?a%2?"r":"l":a%2?"l":"r";return h};this._embossPoint=function(a,
b){var d=function(a,b){return{x:a,y:b}};switch(a){case "tl":return d(b,b);case "tr":return d(this.pageWidth-b,b);case "bl":return d(b,this.pageHeight-b);case "br":return d(this.pageWidth-b,this.pageHeight-b);case "l":return d(b,this.pageHeight/2)}};this._cornerAllowed=function(a,b,d){var e=!0,h=a==b?"odd":"even";if("tl"==a||"tr"==a)e=!1;if("single"==this.options.display&&d%2==0&&("tl"==a||"tr"==a))e=!1;if("odd"==this.options.turnCorners&&"even"==h||"even"==this.options.turnCorners&&"odd"==h)e=!1;return e};
this._cornerActivated=function(a){var b=!1,d,e,h=this.data(),k=a.originalEvent.pageX||a.originalEvent.changedTouches[0].pageX-h.parent.offset().left,n=a.originalEvent.pageY||a.originalEvent.changedTouches[0].pageY-h.parent.offset().top,g=[{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],p=h.page,q=p==h.totalPages||p==h.totalPages+1;p=0;if(q&&this.corners.cornerActivated)return this.corners.cornerActivated;if(a=this.pageWrap[h.page],"single"==this.options.display&&
(a=this.pageWrap[h.page]))if(a=this.pagePlace[h.page],"r"==a&&k<this.pageWidth/2&&(a="l"),h=10,p=g[0].y+h<=n&&n<=g[1].y-h,"l"==a&&k>=this.pageWidth-1.5*h?k=!0:k=-1.5*h<=k&&k<=1.5*h,k&&p&&this._cornerAllowed("tl",a,h.page))b="tl",d=g[0],h=g[3],e=d;else if(k&&p&&this._cornerAllowed("tr",a,h.page))b="tr",d=g[1],h=g[2],e=d;else{if(k=-1.5*h<=k&&k<=1.5*h,p=g[2].y-h<=n&&n<=g[2].y+h,k&&p&&this._cornerAllowed("bl",a,h.page))b="bl",d=g[0],h=g[3],e=h}else if(k&&p&&this._cornerAllowed("br",a,h.page))b="br",
d=g[1],h=g[2],e=h;else if(0<=k&&k<=this.pageWidth&&0<=n&&n<=this.pageHeight&&this._cornerAllowed("l",a,h.page))if(b="l",d=g[0],h=g[2],e=d,p=n-d.y,p=h.y-d.y,p=Math.atan2(10,p),p=180*p/Math.PI,p=Math.PI/2<p?(h.y-n)/10:(n-d.y)/10,10>=p)return!1;return b?(k={corner:b,x:k,y:n,ex:e.x,ey:e.y},a=Math.sqrt(Math.pow(k.x-k.ex,2)+Math.pow(k.y-k.ey,2)),a<45&&!q?(this.corners.cornerActivated=k,k):!1):!1};this._showFoldedPage=function(a,b,d){var e=this.data(),h=this.options,k=this._pos(e.page,b);if(!e.corner&&
e.status&&"turning"!=e.status)if(k=e.page,h=!b,e.nextCorner=null,e.corner=a,a=this._cornerActivated(a))e.nextCorner=a.corner,a.corner&&(d="l"==a.corner||"r"==a.corner?0<e.tpage-e.page?e.tpage:e.page-1:0!=e.page%2?e.page-1:e.page+1,this._trigger("start",d,[e.page,"corner"]));else return!1;e.status=k;k=this.turnData(a);if(h)if(e.corner){if(h=k.pageWidth*k.pageHeight,e.x=k.pageWidth-Math.max(0,k.ex),e.y=k.pageHeight-Math.max(0,k.ey),e.corner="tr"==e.corner||"tl"==e.corner?Math.min(k.ey,k.pageHeight):Math.max(0,
k.ey-k.pageHeight),h-=Math.pow(e.x,2)+Math.pow(e.y,2),e.y=0>e.y?0:e.y,"tr"==e.corner||"br"==e.corner?e.x>=0&&(e.x=0,e.status="end"):"tl"==e.corner||"bl"==e.corner?(e.x=-2*k.pageWidth):"l"==e.corner&&Math.abs(e.y-k.pageHeight/2)<2?(e.y=k.pageHeight/2,e.status="end"):e.y>k.pageHeight/2&&(e.y=k.pageHeight/2),e.x<0&&"l"==e.corner&&(e.x=0,e.status="end"),!d){var h=this._calculateZ(e.status,e.nextCorner,e.corner,k),m=k.peel,n=k.pageObjs[e.page].offset(),p=k.parent.offset();n&&p&&(n.left-=p.left,n.top-=
p.top);var q=k.pageObjs[e.page].position();"r"==e.corner||"l"==e.corner?(p=k.pageWidth/2,h=e.y>=p?e.y-p:p-e.y,p=e.y>=p?"tr"==e.nextCorner?"tl":"bl":"tr"==e.nextCorner?"br":"tr",h=Math.max(0,h)):"tr"==e.corner||"tl"==e.corner?(m&&"tl"==e.corner&&(e.x=-e.x,e.y=0),h=e.y,p=0>e.x?"r":"l"):"br"==e.corner||"bl"==e.corner?(m&&"bl"==e.corner&&(e.x=-e.x),h=k.pageHeight-e.y,p=0>e.x?"r":"l"):(m&&"r"==e.corner&&(e.x=-e.x),h=0>e.x?e.x+2*k.pageWidth:e.x,p=0>e.x?"r":"l");switch(e.corner){case "tl":e.y=0;e.x=
-e.x;break;case "tr":e.y=0;e.x=k.pageWidth-e.x;break;case "bl":e.y=k.pageHeight;e.x=-e.x;break;case "br":e.y=k.pageHeight;e.x=k.pageWidth-e.x;break;case "l":e.y=0<e.y?e.y:0;e.x=0<e.x?0:e.x;break;case "r":e.y=0<e.y?e.y:0,e.x=0<e.x?e.x:0}if(m){var r=0,u=0,w=k.pageObjs[e.page],v=k.pageObjs[0!==e.page%2?e.page-1:e.page+1],t={top:0,left:0};if(n&&(w.css({top:n.top,left:n.left,position:"absolute"}),w.removeClass("hard"),w.addClass("peel"),v.removeClass("hard"),v.addClass("peel")),r=e.y/h,"r"==p?(r=
1-r,u=h*(Math.sin(r*(Math.PI/2))+Math.cos(r*(Math.PI/2)))*Math.PI):(r=r,u=h*(Math.sin(r*(Math.PI/2))+Math.cos(r*(Math.PI/2)))*Math.PI),v.css({top:t.top,left:t.left,position:"absolute"}),r=m*u/10*180/Math.PI,"l"==p)if(r=Math.min(r,180),0<r){if(r=180-r,u=(-h+h*Math.cos(r*Math.PI/180))/Math.sin(r*Math.PI/180),"bl"==e.corner||"l"==e.corner){h=180<r?0:Math.max(0,e.y-u);var z=k.pageHeight-h}else"tl"==e.corner||"l"==e.corner?(h=180<r?0:Math.max(0,e.y-u),z=h):console.log("Error while computing!");t.top-=h;
t.left-=e.x;e.x<-k.pageWidth&&(t.left+=2*k.pageWidth,r=180*Math.atan2(-e.x-k.pageWidth,k.pageHeight-e.y)/Math.PI)}else r=0,"tl"==e.corner?t.top-=e.y:"tr"==e.corner?console.log("check"):"bl"==e.corner?t.top-=e.y-k.pageHeight:"br"==e.